<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<script>
			/*
                fetch 
             */
			fetch('http://localhost:3000/fdata')
				.then(data => {
					// text() 方法属于fetchAPI的一部分，它返回一个Promise实例对象，用于获取后台的数据
					return data.text();
				})
				.then(result => {
					console.log(result);
				});

			// GET请求方式的参数传递
			fetch('http://localhost:3000/books?id=123')
				.then(data => {
					return data.text();
				})
				.then(result => {
					console.log(result);
				});
			fetch('http://localhost:3000/books/456')
				.then(data => {
					return data.text();
				})
				.then(result => {
					console.log(result);
				});
			// DELETE
			fetch('http://localhost:3000/books/789', {
				method: 'delete',
			})
				.then(data => {
					return data.text();
				})
				.then(result => {
					console.log(result);
				});

			// post请求
			fetch('http://localhost:3000/books', {
				method: 'post',
				body: 'uname=lisi&age=18&pwd=123456',
				// 请求头必须设置
				headers: {
					'Content-Type': 'application/x-www-form-urlencoded',
				},
			})
				.then(data => {
					return data.text();
				})
				.then(result => {
					console.log(result);
				});

			// post请求 json格式
			/* fetch('http://localhost:3000/books', {
				method: 'post',
				body: JSON.stringify({
					uname: '张三',
					age: 20,
					pwd: 'yy981011',
				}),
				// 请求头必须设置
				headers: {
					'Content-Type': 'application/json',
				},
			})
				.then(data => {
					return data.text();
				})
				.then(result => {
					console.log(result);
				}); */

			//PUT
			fetch('http://localhost:3000/books/123', {
				mode: 'no-cors',
				method: 'put',
				body: JSON.stringify({
					uanme: '李四',
					pwd: '789',
				}),
				headers: {
					'Content-Type': 'application/json',
				},
			})
				.then(data => {
					return data.text();
				})
				.then(result => {
					console.log(result);
				});
		</script>
	</body>
</html>
